# (#Case #16522: Check DataType year)
# (#Case #16523: Check DataType time)
# (#Case #13091: Check DataType date)
# (#Case #13092: Check DataType timestamp)
# (#Case #14430: Check DataType datetime)
--source include/have_sequoiadb.inc

--disable_warnings
drop table if exists t1;
--enable_warnings

#time
create table t1(y1 time);
insert into t1 values('-838:59:59.000000');
insert into t1 values('838:59:59.000000');
insert into t1 values('838:59:59.000000');
insert into t1 values('12:59:59.000000');
insert into t1 values('13:59:59');
insert into t1 values('-13:59');
insert into t1 values('0 13:59');
insert into t1 values('34 13:59');
insert into t1 values('24 10');
insert into t1 values('59');
insert into t1 values('101112');
insert into t1 values('1112');
insert into t1 values('12');
insert into t1 values('59');
insert into t1 values(101112);
insert into t1 values(1112);
insert into t1 values(12);
insert into t1 values(59);
insert into t1 values('38:59:59.000000');
insert into t1 values('0:0:0.000000');
select * from t1;
update t1 set y1='38:59:00.000000' where y1='38:59:59.000000';
select * from t1;
delete from t1;
select * from t1;
--error 1292
insert into t1 values ('-839:00:00.000000');
--error 1292
insert into t1 values ('839:00:00.000000');
--error 1292
insert into t1 values ('a');
drop table t1;

#year
create table t1(y1 year, y2 year(4));
insert into t1 values(1901,2155);
insert into t1 values('1901','2155');
insert into t1 values('2018','2018');
select * from t1;
update t1 set y2=2008 where y2=2155;
select * from t1;
delete from t1;
select * from t1;
--error 1264
insert into t1(y1) values (1900);
--error 1264
insert into t1(y2) values (2156);
--error 1366
insert into t1(y2) values ('a');
drop table t1;

#date
create table t1(d date);
insert into t1 values('1000-01-01'),('9999-12-31');
select * from t1;
update t1 set d='1000-01-01' where d='2018-11-22';
select * from t1;
delete from t1;
select * from t1;
--error 1292
insert into t1 values ('1000-01-00');
--error 1292
insert into t1 values ('10000-01-01');
--error 1292
insert into t1 values ('a');
drop table t1;

#timestamp
create table t1(t timestamp);
SET time_zone='+00:00';
insert into t1 values('1970-01-01 00:00:01');
insert into t1 values('2038-01-19 03:14:07');
insert into t1 values('2012-01-19 03:14:07.999999');
select * from t1;
update t1 set t='2012-01-19 03:14:07.999999' where t='2013-01-19 03:14:07.999999';
select * from t1;
delete from t1;
select * from t1;
--error 1292
insert into t1 values ('1969-12-31 00:00:00');
--error 1292
insert into t1 values ('2038-01-19 03:14:08.999999');
--error 1292
insert into t1 values ('a');
drop table t1;
SET time_zone=default;

#datetime
create table t1(t datetime);
insert into t1 values('1000-01-01 00:00:00.000000');
insert into t1 values('9999-12-31 23:59:59');
insert into t1 values('2012-01-19 03:14:07.999999');
select * from t1;
update t1 set t='2012-01-19 03:14:07.999999' where t='2013-01-19 03:14:07.999999';
select * from t1;
delete from t1;
select * from t1;
--error 1292
insert into t1 values ('1000-01-00 00:00:00.999999');
--error 1292
insert into t1 values ('10000-01-01 00:00:00.000000');
--error 1292
insert into t1 values ('a');
drop table t1;

#set time_zone='+00:00',Bug #SEQUOIASQLMAINSTREAM-176, add testcase
set time_zone='+00:00';
create table t1(a date);
insert into t1 values ("2001-01-10");
insert into t1 values ("2001-01-11");
insert into t1 values ("2001-01-12");
select * from t1 where a = ADDDATE("2001-01-01", 10);
drop table t1;

create table t1(a datetime(6));
insert into t1 values ("2001-01-01 10:00:00.123456");
insert into t1 values ("2001-01-01 10:00:00");
select * from t1 where a = ADDTIME("2001-01-01 00:00:00", "10:00:00");
drop table t1;

create table t1(a time(6));
insert into t1 values ("11:00:00.123456");
insert into t1 values ("11:00:00");
select * from t1 where a = ADDTIME("01:00:00", "10:00:00");
drop table t1;

set time_zone=default;

--source include/uninstall_sequoiadb.inc

